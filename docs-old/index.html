<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Introduction - Substrate Recipes</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="A Hands-On Cookbook for Aspiring Blockchain Chefs">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="pallets-intro.html"><strong aria-hidden="true">1.</strong> Pallets</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="runtime-printing.html"><strong aria-hidden="true">1.1.</strong> Printing to the Node Log</a></li><li class="chapter-item expanded "><a href="events.html"><strong aria-hidden="true">1.2.</strong> Emitting Events</a></li><li class="chapter-item expanded "><a href="storage-maps.html"><strong aria-hidden="true">1.3.</strong> Storage Maps</a></li><li class="chapter-item expanded "><a href="cache.html"><strong aria-hidden="true">1.4.</strong> Cache Locally &gt; Storage Calls</a></li><li class="chapter-item expanded "><a href="vec-set.html"><strong aria-hidden="true">1.5.</strong> Using Vectors as Sets</a></li><li class="chapter-item expanded "><a href="map-set.html"><strong aria-hidden="true">1.6.</strong> Using Maps as Sets</a></li><li class="chapter-item expanded "><a href="double.html"><strong aria-hidden="true">1.7.</strong> Subgroup Removal by Subkey: Double Maps</a></li><li class="chapter-item expanded "><a href="structs.html"><strong aria-hidden="true">1.8.</strong> Storing custom structs</a></li><li class="chapter-item expanded "><a href="ringbuffer.html"><strong aria-hidden="true">1.9.</strong> Ringbuffer Queue</a></li><li class="chapter-item expanded "><a href="basic-token.html"><strong aria-hidden="true">1.10.</strong> Basic Token</a></li><li class="chapter-item expanded "><a href="constants.html"><strong aria-hidden="true">1.11.</strong> Configurable Constants</a></li><li class="chapter-item expanded "><a href="crowdfund.html"><strong aria-hidden="true">1.12.</strong> Simple Crowdfund</a></li><li class="chapter-item expanded "><a href="instantiable.html"><strong aria-hidden="true">1.13.</strong> Instantiable Pallets</a></li><li class="chapter-item expanded "><a href="weights.html"><strong aria-hidden="true">1.14.</strong> Weights for Resource Accounting</a></li><li class="chapter-item expanded "><a href="charity.html"><strong aria-hidden="true">1.15.</strong> Charity and Imbalances</a></li><li class="chapter-item expanded "><a href="fixed-point.html"><strong aria-hidden="true">1.16.</strong> Fixed Point Arithmetic</a></li><li class="chapter-item expanded "><a href="off-chain-workers/index.html"><strong aria-hidden="true">1.17.</strong> Off-chain Workers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="off-chain-workers/transactions.html"><strong aria-hidden="true">1.17.1.</strong> Transactions</a></li><li class="chapter-item expanded "><a href="off-chain-workers/http-json.html"><strong aria-hidden="true">1.17.2.</strong> HTTP Fetching &amp; JSON Parsing</a></li><li class="chapter-item expanded "><a href="off-chain-workers/storage.html"><strong aria-hidden="true">1.17.3.</strong> Local Storage</a></li><li class="chapter-item expanded "><a href="off-chain-workers/indexing.html"><strong aria-hidden="true">1.17.4.</strong> Off-chain Indexing</a></li></ol></li><li class="chapter-item expanded "><a href="currency.html"><strong aria-hidden="true">1.18.</strong> Currency Types</a></li><li class="chapter-item expanded "><a href="currency-imbalances.html"><strong aria-hidden="true">1.19.</strong> Currency and Imbalances</a></li><li class="chapter-item expanded "><a href="randomness.html"><strong aria-hidden="true">1.20.</strong> Generating Randomness</a></li><li class="chapter-item expanded "><a href="pallet-coupling.html"><strong aria-hidden="true">1.21.</strong> Tightly- and Loosely-Coupled Pallets</a></li></ol></li><li class="chapter-item expanded "><a href="runtimes-intro.html"><strong aria-hidden="true">2.</strong> Runtimes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="runtime-api.html"><strong aria-hidden="true">2.1.</strong> Runtime APIs</a></li><li class="chapter-item expanded "><a href="fees.html"><strong aria-hidden="true">2.2.</strong> Transaction Fees for Economic Security</a></li></ol></li><li class="chapter-item expanded "><a href="consensus-intro.html"><strong aria-hidden="true">3.</strong> Consensus</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="sha3-pow-consensus.html"><strong aria-hidden="true">3.1.</strong> Sha3 Pow Consensus Algorithms</a></li></ol></li><li class="chapter-item expanded "><a href="nodes-intro.html"><strong aria-hidden="true">4.</strong> Nodes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="kitchen-node.html"><strong aria-hidden="true">4.1.</strong> Kitchen Node - An reusable instant seal node</a></li><li class="chapter-item expanded "><a href="custom-rpc.html"><strong aria-hidden="true">4.2.</strong> Custom RPCs</a></li><li class="chapter-item expanded "><a href="basic-pow.html"><strong aria-hidden="true">4.3.</strong> Basic Proof of Work Node</a></li><li class="chapter-item expanded "><a href="hybrid-consensus.html"><strong aria-hidden="true">4.4.</strong> Hybrid PoW/PoS Consensus Node</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Substrate Recipes</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="substrate-recipes-"><a class="header" href="#substrate-recipes-">Substrate Recipes 🍴😋🍴</a></h1>
<p><em>A Hands-On Cookbook for Aspiring Blockchain Chefs</em></p>
<p>Substrate Recipes is a cookbook of working examples that demonstrate best practices when building
blockchains with <strong><a href="https://substrate.dev">Substrate</a></strong>. Each recipe contains
complete working code as well as a detailed writeup explaining the code.</p>
<h2 id="how-to-use-this-book"><a class="header" href="#how-to-use-this-book">How to Use This Book</a></h2>
<p>You can read this book in any particular order. If you have a certain topic you want to dive into, or
know the subject/keyword to look for, please use the search button (the small magnifier on top
left) to search for the subject. The list is organized roughly in order of increasing complexity.</p>
<p>You can't learn to build blockchains by reading alone. As you work through the recipes, practice compiling, testing, and hacking on each Recipes. Play with
the code, extract patterns, and apply them to a problem that you want to solve!</p>
<p>If you haven't already, you should probably clone this repository right now.</p>
<pre><code class="language-bash">git clone https://github.com/substrate-developer-hub/recipes.git
</code></pre>
<h2 id="getting-help"><a class="header" href="#getting-help">Getting Help</a></h2>
<p>When learning any new skill, you will inevitably get stuck at some point. When you do get stuck you
can seek help in several ways:</p>
<ul>
<li>Ask a question on <a href="https://stackoverflow.com/questions/tagged/substrate">Stack Overflow</a></li>
<li>Ask a question in the
<a href="https://app.element.io/#/room/!HzySYSaIhtyWrwiwEV:matrix.org">Substrate Technical Element channel</a></li>
<li>Open a <a href="https://github.com/substrate-developer-hub/recipes/issues/new">new issue</a> against this
repository</li>
</ul>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<p>Each recipe targets a specific aspect of Substrate development and explains the details of that aspect. In all recipes some basic familiarity with Substrate development and a working Rust environment are assumed. Generally speaking you should meet the following prerequisites:</p>
<ul>
<li>Have a working Substrate development environment. There are excellent docs on <a href="https://substrate.dev/docs/en/knowledgebase/getting-started/">setting up a Substrate development environment</a>.</li>
<li>Understand the first ten chapters of <a href="https://doc.rust-lang.org/book/index.html">The Rust Book</a>. Rather than learning Rust <em>before</em> you learn Substrate, consider learning Rust <em>as</em>
you learn Substrate.</li>
<li>Complete the first few <a href="https://substrate.dev/en/tutorials">Official Substrate Tutorials</a>.</li>
</ul>
<h2 id="structure-of-a-substrate-node"><a class="header" href="#structure-of-a-substrate-node">Structure of a Substrate Node</a></h2>
<p>It is useful to recognize that
<a href="https://youtu.be/05H4YsyPA-U?t=1789">coding is all about abstraction</a>.</p>
<p>To understand how the code in this repository is organized, let's first take a look at how a
Substrate node is constructed. Each node has many components that manage things like the transaction
queue, communicating over a P2P network, reaching consensus on the state of the blockchain, and the
chain's actual runtime logic. Each aspect of the node is interesting in its own right, and the
runtime is particularly interesting because it contains the business logic (aka &quot;state transition
function&quot;) that codifies the chain's functionality.</p>
<p>Much, but not all, of the Recipes focuses on writing runtimes with FRAME, Parity's Framework for
composing runtimes from individual building blocks called Pallets. Runtimes built with FRAME
typically contain several such pallets. The kitchen node you built previously follows this paradigm.</p>
<p><img src="img/substrate-architecture.png" alt="Substrate Architecture Diagram" /></p>
<h2 id="the-directories-in-our-kitchen"><a class="header" href="#the-directories-in-our-kitchen">The Directories in our Kitchen</a></h2>
<p>If you haven't already, you should clone it now. There are five primary directories in this repository.</p>
<ul>
<li><strong>Consensus</strong>: Consensus engines for use in Substrate nodes.</li>
<li><strong>Nodes</strong>: Complete Substrate nodes ready to run.</li>
<li><strong>Pallets</strong>: Pallets for use in FRAME-based runtimes.</li>
<li><strong>Runtimes</strong>: Runtimes for use in Substrate nodes.</li>
<li><strong>Text</strong>: Source of <a href="https://substrate.dev/recipes">the book</a> written in markdown. This is what
you're reading right now.</li>
</ul>
<p>Exploring those directories reveals a tree that looks like this</p>
<pre><code>recipes
|
+-- consensus
  |
  +-- manual-seal
  |
  +-- sha3pow
|
+-- nodes
	|
	+-- basic-pow
	|
	+-- ...
	|
	+-- rpc-node
|
+-- pallets
	|
	+-- basic-token
	|
	+ ...
	|
	+-- weights
|
+-- runtimes
	|
	+-- api-runtime
	|
	+ ...
	|
	+-- weight-fee-runtime
|
+-- text
</code></pre>
<h2 id="inside-the-kitchen-node"><a class="header" href="#inside-the-kitchen-node">Inside the Kitchen Node</a></h2>
<p>Let us take a deeper look at the
<a href="https://github.com/substrate-developer-hub/recipes/tree/master/nodes/kitchen-node">Kitchen Node</a>.</p>
<p>Looking inside the Kitchen Node's <code>Cargo.toml</code> file we see that it has many dependencies. Most of
them come from Substrate itself. Indeed most parts of this Kitchen Node are not unique or
specialized, and Substrate offers robust implementations that we can use. The runtime does not come
from Substrate. Rather, we use our super-runtime which is in the <code>runtimes</code> folder.</p>
<p><strong><code>nodes/kitchen-node/Cargo.toml</code></strong></p>
<pre><code class="language-TOML"># This node is compatible with any of the runtimes below
# ---
# Common runtime configured with most Recipes pallets.
runtime = { package = &quot;super-runtime&quot;, path = &quot;../../runtimes/super-runtime&quot; }

# Runtime with custom weight and fee calculation.
# runtime = { package = &quot;weight-fee-runtime&quot;, path = &quot;../../runtimes/weight-fee-runtime&quot;}

# Runtime with off-chain worker enabled.
# To use this runtime, compile the node with `ocw` feature enabled,
#   `cargo build --release --features ocw`.
# runtime = { package = &quot;ocw-runtime&quot;, path = &quot;../../runtimes/ocw-runtime&quot; }

# Runtime with custom runtime-api (custom API only used in rpc-node)
# runtime = { package = &quot;api-runtime&quot;, path = &quot;../../runtimes/api-runtime&quot; }
# ---
</code></pre>
<p>The commented lines, quoted above, show that the Super Runtime is not the only runtime we could have
chosen. We could also use the Weight-Fee runtime, and I encourage you to try that experiment
(remember, instructions to re-compile the node are in the previous section).</p>
<p>Every node must have a runtime. You may confirm that by looking at the <code>Cargo.toml</code> files of the
other nodes included in our kitchen.</p>
<h2 id="inside-the-super-runtime"><a class="header" href="#inside-the-super-runtime">Inside the Super Runtime</a></h2>
<p>Having seen that the Kitchen Node depends on a runtime, let us now look deeper at the
<a href="https://github.com/substrate-developer-hub/recipes/tree/master/runtimes/super-runtime">Super Runtime</a>.</p>
<p><strong><code>runtimes/super-runtime/Cargo.toml</code></strong></p>
<pre><code class="language-TOML"># -- snip --

# Substrate Pallets
balances = { package = 'pallet-balances', , ... }
transaction-payment = { package = 'pallet-transaction-payment', ,... }
# Recipe Pallets
adding-machine = { path = &quot;../../pallets/adding-machine&quot;, default-features = false }
basic-token = { path = &quot;../../pallets/basic-token&quot;, default-features = false }
</code></pre>
<p>Here we see that the runtime depends on many pallets. Some of these pallets come from Substrate
itself. Indeed, Substrate offers a rich collection of commonly used pallets which you may use in
your own runtimes. This runtime also contains several custom pallets that are written right here in
our Kitchen.</p>
<h2 id="common-patterns"><a class="header" href="#common-patterns">Common Patterns</a></h2>
<p>We've just observed the general pattern used throughout the recipes. From the inside out, we see a
piece of pallet code stored in <code>pallets/&lt;pallet-name&gt;/src/lib.rs</code>. The pallet is then included into
a runtime by adding its name and relative path in <code>runtimes/&lt;runtime-name&gt;/Cargo.toml</code>. That runtime
is then installed in a node by adding its name and relative path in <code>nodes/&lt;node-name&gt;/Cargo.toml</code>.</p>
<p>Some recipes explore aspects of Blockchain development that are outside of the runtime. Looking back
to our node architecture at the beginning of this section, you can imagine that changing a node's
RPC or Consensus would be conceptually similar to changing its runtime.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->

                            <a rel="next" href="pallets-intro.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

                    <a rel="next" href="pallets-intro.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src=".analytics/load.js"></script>
        <script type="text/javascript" src=".analytics/config.js"></script>
        <script type="text/javascript" src=".analytics/klaro.min.js"></script>


    </body>
</html>
